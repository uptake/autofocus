services:
  - docker

matrix:
  include:
    
    - language: python
      os: linux
      python: 3.6
    
before_install:
  - pip install -U pip
  - pip install awscli
  - aws s3 cp s3://autofocus/models/multilabel_model_20190407.pkl ./autofocus/predict/models/
  - docker build -t test-autofocus-serve ./autofocus/predict/
  - docker ps -a
  - docker run -d -p 8000:8000 test-autofocus-serve
install:
  - pip install ".[dev]"
script:
  - ./.ci/travis_checks.sh
  - ./.ci/local_checks.sh
